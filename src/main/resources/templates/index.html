<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>开始使用layui</title>
    <link rel="stylesheet" href="../layui/css/layui.css">
</head>
<body>

<div id="daohang">
    <ul class="layui-nav" lay-filter="demo">
        <li class="layui-nav-item"><a href="">最新活动</a></li>
        <li class="layui-nav-item layui-this"><a href="">产品</a></li>
        <li class="layui-nav-item"><a href="">大数据</a></li>
        <li class="layui-nav-item">
            <a href="javascript:;">解决方案</a>
            <dl class="layui-nav-child"> <!-- 二级菜单 -->
                <dd><a href="">移动模块</a></dd>
                <dd><a href="">后台模版</a></dd>
                <dd><a href="">电商平台</a></dd>
            </dl>
        </li>
        <li class="layui-nav-item"><a href="">社区</a></li>

            <li class="layui-nav-item">
                <a href="">控制台<span class="layui-badge">9</span></a>
            </li>
            <li class="layui-nav-item">
                <a href="">个人中心<span class="layui-badge-dot"></span></a>
            </li>
            <li class="layui-nav-item">
                <a href=""><img src="http://t.cn/RCzsdCq" class="layui-nav-img">我</a>
                <dl class="layui-nav-child">
                    <dd><a href="javascript:;">修改信息</a></dd>
                    <dd><a href="javascript:;">安全管理</a></dd>
                    <dd><a href="javascript:;">退了</a></dd>
                </dl>
            </li>
    </ul>
</div>

<div class="layui-form">
    <table class="layui-table">
        <colgroup>
            <col width="150">
            <col width="150">
            <col width="200">
            <col>
        </colgroup>
        <thead>
        <tr>
            <th>商品ID</th>
            <th>供货商</th>
            <th>商品名称</th>
            <th>价格</th>
            <th>销售价</th>
            <th>结算价</th>
            <th>商品介绍</th>
        </tr>
        </thead>
        <tbody id="tableContent">
        </tbody>
    </table>
</div>

<table id="demo" lay-filter="test"></table>

<script src="/layui/layui.js"></script>
<script type="text/javascript">
    //一般直接写在一个js文件中
    layui.use(['jquery', 'laypage', 'layer', 'element'], function () {
        var $ = layui.$ //重点处
            , layer = layui.layer;
        var laypage = layui.laypage;

        layer.msg('Hello World');
        var element = layui.element;

        //一些事件监听
        element.on('tab(demo)', function (data) {
            console.log(data);
        });
        //后面就跟你平时使用jQuery一样
        pager();
        function pager(curr, size) {
            var data = {
                page: curr || 1,
                size: size || 10,
            };
            $.getJSON('/page/goods', data, function (res) {
                var goodsList = $("#tableContent").empty();
                console.log(res);
                $.each(res.content, function (index, goods) {
                    var html = '<tr><td>' + goods.id + '</td>' + '<td>' + goods.supplierName + '</td>' + '<td>' + goods.name + '</td>' + '<td>' + goods.price + '</td>' + '<td>' + goods.salesPrice + '</td>' + '<td>' + goods.settlementPrice + '</td>' + '<td>' + goods.goodsIntro + '</td></tr>>';
                    goodsList.append(html);
                });
                //完整功能
                laypage.render({
                    elem: 'demo',
                    count: res.totalElements,
                    curr: curr || 1,
                    limit: res.size,
                    layout: ['count', 'prev', 'page', 'next', 'limit', 'skip'],
                    jump: function (obj, first) {
                        console.log(obj);
                        if (!first) {
                            console.log('点击跳页触发函数自身，并传递当前页：obj.curr', obj.curr);
                            pager(obj.curr, obj.limit);
                        }
                    }
                });
            })
        }
    });
</script>
</body>
</html>